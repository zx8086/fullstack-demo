import{createRequest as e,Client as t}from"@urql/core";export*from"@urql/core";import{make as r,subscribe as a,scan as o,switchMap as n,never as i,concat as s,fromValue as u,map as c}from"wonka";import{writable as p,derived as l}from"svelte/store";import{getContext as f,setContext as d}from"svelte";var v=e=>r((t=>e.subscribe(t.next))),x={operation:void 0,fetching:!1,data:void 0,error:void 0,extensions:void 0,hasNext:!1,stale:!1},q=e=>({isPaused$:e,pause(){e.set(!0)},resume(){e.set(!1)}});function b(t){var r=e(t.query,t.variables),f={requestPolicy:t.requestPolicy,...t.context},d=t.client.createRequestOperation("query",r,f),b={...x,operation:d},h=p(!!t.pause),m=p(b,(()=>a((e=>{m.set(e)}))(o(((e,t)=>({...e,...t})),b)(n((e=>e?i:s([u({fetching:!0,stale:!1}),c((({stale:e,data:t,error:r,extensions:a,operation:o})=>({fetching:!1,stale:!!e,data:t,error:r,operation:o,extensions:a})))(t.client.executeRequestOperation(d)),u({fetching:!1})])))(v(h)))).unsubscribe));return{...l(m,((e,t)=>{t(e)})),...q(h)}}function h(t){var r=e(t.query,t.variables),n=t.client.createRequestOperation("mutation",r,t.context),i={...x,operation:n,fetching:!0},s=p(i),u=a((e=>{s.set(e)}))(o(((e,t)=>({...e,...t})),i)(c((({stale:e,data:t,error:r,extensions:a,operation:o})=>({fetching:!1,stale:e,data:t,error:r,operation:o,extensions:a})))(t.client.executeRequestOperation(n))));return l(s,((e,t)=>(t(e),u.unsubscribe)))}function m(t,r){var f=e(t.query,t.variables),d=t.client.createRequestOperation("subscription",f,t.context),b={...x,operation:d,fetching:!0},h=p(!!t.pause),m=p(b,(()=>a((e=>{m.set(e)}))(o(((e,t)=>{var a=void 0!==t.data?"function"==typeof r?r(e.data,t.data):t.data:e.data;return{...e,...t,data:a}}),b)(n((e=>e?i:s([u({fetching:!0,stale:!1}),c((({stale:e,data:t,error:r,extensions:a,operation:o})=>({fetching:!0,stale:!!e,data:t,error:r,operation:o,extensions:a})))(t.client.executeRequestOperation(d)),u({fetching:!1})])))(v(h)))).unsubscribe));return{...l(m,((e,t)=>{t(e)})),...q(h)}}var g="$$_urql",y=()=>f(g),O=e=>{d(g,e)},R=e=>{var r=new t(e);return O(r),r};export{y as getContextClient,R as initContextClient,h as mutationStore,b as queryStore,O as setContextClient,m as subscriptionStore};
//# sourceMappingURL=urql-svelte.min.mjs.map
